<hb-header></hb-header>
<div class="content">
  <div class="container">
    <div class="row">
      <div class="col-12 col-md-6 offset-md-3">
        <h4 class="column-title">Conversa</h4>
        <div class="row mb-3">
          <div class="col-12 col-md-8">
            <div class="mb-2">
              <span class="badge badge-secondary">{{ hash }}</span>
            </div>
          </div>
          <div class="col-12 col-md-4 text-md-right">
            <button
              *ngIf="!processing"
              (click)="refresh()"
              class="btn btn-sm btn-primary">Atualizar</button>
              <span class="text-warning" *ngIf="processing">atualizando...</span>
          </div>
        </div>
        <div class="messages">
          <ng-container *ngFor="let msg of messages">
            <div
              [ngClass]="{
                'text-right': msg.token === token,
                'text-left': msg.token !== token
              }">
              <span class="message-time">{{ msg.token.slice(0,6) }} - {{ msg.timestamp | date:'yyyy/MM/dd HH:mm'}}</span>
              <span class="message-text">{{ msg.message }}</span>
            </div>
          </ng-container>
        </div>
        <div class="input-group mb-3">
          <!--
            para utilizar a diretiva '[(ngModel)]' é necessário
            importar o módulo 'FormsModule', no módulo ChatModule
          -->
          <input
           [(ngModel)]="message"
           (keydown.enter)="send()"
           type="text" class="form-control" placeholder="Mensagem">
          <div class="input-group-append">
            <button
              (click)="send()"
              class="btn btn-success" type="button">Enviar</button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<hb-footer></hb-footer>